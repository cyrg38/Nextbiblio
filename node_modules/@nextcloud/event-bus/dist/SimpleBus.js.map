{"version":3,"sources":["../lib/SimpleBus.ts"],"names":["SimpleBus","Map","packageJson","version","name","handler","handlers","set","get","concat","filter","h","event","forEach","e","console","error"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAKaA,S;;;;sCAEU,IAAIC,GAAJ,E;;;;;iCAEE;AACjB,aAAOC,WAAW,CAACC,OAAnB;AACH;;;8BAESC,I,EAAcC,O,EAA6B;AACjD,WAAKC,QAAL,CAAcC,GAAd,CAAkBH,IAAlB,EAAwB,CAAC,KAAKE,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCK,MAAhC,CAAuCJ,OAAvC,CAAxB;AACH;;;gCAEWD,I,EAAcC,O,EAA6B;AACnD,WAAKC,QAAL,CAAcC,GAAd,CAAkBH,IAAlB,EAAwB,CAAC,KAAKE,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCM,MAAhC,CAAuC,UAAAC,CAAC;AAAA,eAAIA,CAAC,IAAIN,OAAT;AAAA,OAAxC,CAAxB;AACH;;;yBAEID,I,EAAcQ,K,EAAoB;AACnC,OAAC,KAAKN,QAAL,CAAcE,GAAd,CAAkBJ,IAAlB,KAA2B,EAA5B,EAAgCS,OAAhC,CAAwC,UAAAF,CAAC,EAAI;AACzC,YAAI;AACAA,UAAAA,CAAC,CAACC,KAAD,CAAD;AACH,SAFD,CAEE,OAAOE,CAAP,EAAU;AACRC,UAAAA,OAAO,CAACC,KAAR,CAAc,iCAAd,EAAiDF,CAAjD;AACH;AACJ,OAND;AAOH","sourcesContent":["import packageJson from \"../package.json\";\nimport { Event } from \"./Event.js\";\nimport { EventBus } from \"./EventBus.js\";\nimport { EventHandler } from \"./EventHandler.js\";\n\nexport class SimpleBus implements EventBus {\n\n    private handlers = new Map<string, EventHandler[]>();\n\n    getVersion(): string {\n        return packageJson.version\n    }\n\n    subscribe(name: string, handler: EventHandler): void {\n        this.handlers.set(name, (this.handlers.get(name) || []).concat(handler));\n    }\n\n    unsubscribe(name: string, handler: EventHandler): void {\n        this.handlers.set(name, (this.handlers.get(name) || []).filter(h => h != handler));\n    }\n\n    emit(name: string, event: Event): void {\n        (this.handlers.get(name) || []).forEach(h => {\n            try {\n                h(event)\n            } catch (e) {\n                console.error('could not invoke event listener', e)\n            }\n        })\n    }\n\n}\n"],"file":"SimpleBus.js"}